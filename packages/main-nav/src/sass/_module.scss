//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// main-nav module
// Horizontal list of links to key areas on the website. Usually located in the header.
//
// Content:
// - sass-versioning
// - globals
//--------------------------------------------------------------------------------------------------------------------------------------------------------------


@import '_globals.scss';
@import '_print.scss';


.au-main-nav {
	@include AU-fontgrid( sm );
	@include AU-space( border-bottom, solid 0.5unit $AU-color-foreground-action );
	background-color: $AU-color-background;
	font-family: $AU-font;
	color: $AU-color-foreground-text;

	a {
		@include AU-space( padding, 1unit );
		@include AU-fontgrid( xs );
		color: $AU-color-foreground-muted;
		display: block;
		text-decoration: none;

		&:hover {
			text-decoration: underline;
			text-decoration-skip: ink;
			background-color: $AU-color-background-alt-shade;
		}
	}

	@include AU-media( md ) {
		a {
			@include AU-fontgrid( sm );
			display: block;
			text-decoration: none;
			color: $AU-color-foreground-action;

			&:hover {
				color: $AU-color-foreground-text;
				text-decoration: underline;
				text-decoration-skip: ink;
				background: $AU-color-background-shade;
			}

			@include AU-focus();
		}
	}
}

.au-main-nav__content {
	ul {
		@include AU-clearfix();
		padding: 0;
		margin: 0;
		list-style: none;

		& > li {
			border-bottom: 1px solid $AU-color-foreground-border;

			&:last-of-type {
				border: none;
			}
		}
	}

	.active a {
		font-weight: bold;
		color: $AU-color-foreground-text;
	}

	@include AU-media( md ){
		ul > li {
			display: block;
			float: left;
			border: none;
		}

		a {
			@include AU-space( padding, 1unit 1unit );
		}

		.active a {
			font-weight: normal;
			@include AU-space( margin-bottom, -0.5unit );
			@include AU-space( border-bottom, 0.5unit solid $AU-color-background );

			&:hover {
				border-color: $AU-color-background-shade;
			}
		}
	}
}


.au-main-nav--alt {
	background-color: $AU-color-background-alt;

	.active a {
		border-color: $AU-color-background-alt;

		&:hover {
			border-color: $AU-color-background-alt-shade;
		}
	}

	a:hover {
		background-color: $AU-color-background-alt-shade;
	}
}


.au-main-nav--dark {
	background-color: $AU-colordark-background;
	border-bottom-color: $AU-colordark-foreground-action;

	.active a {
		border-color: $AU-colordark-background;

		&:hover {
			border-color: $AU-colordark-background-shade;
		}
	}

	a {
		color: $AU-colordark-foreground-action;
		@include AU-focus( dark );
		&:hover {
			color: $AU-colordark-foreground-text;
			background-color: $AU-colordark-background-shade;
		}
	}
}


.au-main-nav--alt.au-main-nav--dark {
	background-color: $AU-colordark-background-alt;

	.active a {
		border-color: $AU-colordark-background-alt;

		&:hover {
			border-color: $AU-colordark-background-alt-shade;
		}
	}

	a:hover {
		background-color: $AU-colordark-background-alt-shade;
	}
}



// Always hide unless there is javascript
.au-main-nav__toggle {
	display: none;
	cursor: pointer;
}


.no-js .au-main-nav__toggle {
	display: none;
}


.js {
	// Move the content off the screen for mobile and js enabled
	.au-main-nav__content {
		position: fixed;
		top: 0;
		bottom: 0;
		left: -300px;
		width: 300px;
		display: none;
		z-index: 20;
		background: $AU-color-background;
		overflow: auto;
	}

	.au-main-nav--open .au-main-nav__content {
		left: 0;
		display: block;
	}

	// Show the toggle for mobile dimensions
	.au-main-nav__toggle {
		display: inline-block;
	}

	// Add inner padding for the content area
	.au-main-nav__content-inner {
		@include AU-space( padding, 1unit );
	}

	.au-main-nav__overlay {
		transition: opacity 0.3s ease-out;
		background-color: rgba( 0, 0, 0, 0.9 );
		cursor: pointer;
		position: fixed;
		top: 0;
		left: -100%;
		bottom: 0;
		width: 100%;
		z-index: 10;
		opacity: 0;
	}

	.au-main-nav--open .au-main-nav__overlay {
		left: 0;
		opacity: 1;
	}

	// Lock the scroll
	&.js-au-main-nav__scroll--locked {
		overflow: hidden;
	}

	// On desktop
	@include AU-media( md ) {
		// Remove the toggle button and overlay
		.au-main-nav__overlay,
		.au-main-nav__toggle {
			display: none;
		}

		// Unlock scroll lock
		&.js-au-main-nav__scroll--locked {
			overflow: visible;
		}

		// Reset the mobile menu styling
		.au-main-nav__content {
			position: static;
			display: block;
			width: auto;
			overflow: inherit;
		}

		// Remove padding on inner
		.au-main-nav__content-inner {
			padding: 0;
		}
	}
}
